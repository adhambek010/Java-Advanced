package com.java.advanced.serialization;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

public class SerDemo {

	public static void main(String[] args) {
		Student std1 = new Student("Adkham", 22, "Lodz, Poland");
		
		final String File_Name = "C:\\JavaLearning\\JavaAdvanced\\JavaAdvanced\\src\\com\\java\\advanced\\serialization\\std.ser";
		
		// Serializatoin
		try {
			System.out.println("Object Serialization is started...\n");
			FileOutputStream fos = new FileOutputStream(File_Name);
			ObjectOutputStream oos = new ObjectOutputStream(fos);
			oos.writeObject(std1);
			
			fos.close();
			oos.close();
			System.out.println("Object Serialization is finished!");
		}catch (IOException e) {
			System.err.println(e.toString());
			e.printStackTrace();
		}
		
		try {
			System.out.println("\nDeserialization is started...");
			FileInputStream fis = new FileInputStream(File_Name);
			ObjectInputStream ois = new ObjectInputStream(fis);
			
			Student std2 = (Student) ois.readObject();
			System.out.println("Deserialization is finished!");
			std2.getAge();
			int size = fis.available();
			byte[] bs = new byte[size];
			fis.read(bs);
			String serializedtxt = new String(bs);
			System.out.println("This is serialized text : "+serializedtxt);
			
			fis.close();
			ois.close();
		}catch(IOException | ClassNotFoundException e) {
			System.err.println(e.toString());
			e.printStackTrace();
		}
		
	}

}
